<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="cx_tower_webhook_authenticator_view_form" model="ir.ui.view">
        <field name="name">cx.tower.webhook.authenticator.view.form</field>
        <field name="model">cx.tower.webhook.authenticator</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button
                            type="object"
                            name="action_view_logs"
                            string="Logs"
                            icon="fa-list"
                            class="oe_stat_button"
                            invisible="log_count == 0"
                        >
                            <field name="log_count" widget="statinfo" string="Logs" />
                        </button>
                    </div>
                    <group>
                        <group>
                            <field name="name" />
                            <field name="reference" />
                            <field
                                name="variable_ids"
                                widget="many2many_tags"
                                groups="cetmix_tower_server.group_manager,cetmix_tower_server.group_root"
                                readonly="1"
                                invisible="not variable_ids"
                            />
                            <field
                                name="secret_ids"
                                widget="many2many_tags"
                                groups="cetmix_tower_server.group_manager,cetmix_tower_server.group_root"
                                invisible="not secret_ids"
                            />
                        </group>
                        <group>
                            <field
                                name="allowed_ip_addresses"
                                placeholder="e.g.: 192.168.1.10, 192.168.2.0/24, 2001:db8::/32, 2a00:1450:4001:824::200e"
                            />
                            <field
                                name="trusted_proxy_ips"
                                placeholder="10.0.0.1,192.168.1.0/24"
                            />
                        </group>
                    </group>
                    <notebook>
                        <page name="code" string="Code">
                            <field
                                name="code"
                                widget="ace_tower"
                                options="{'mode': 'python'}"
                                placeholder="Enter Python code here. Help about Python expression is available in the help tab of this document"
                            />
                        </page>
                        <page string="Help" name="python_help_info">
                            <field name="code_help" />
                        </page>
                        <page name="yaml" string="YAML">
                            <div groups="!cetmix_tower_yaml.group_export">
                                <h3
                                >You must be a member of the "YAML/Export" group to export data as YAML</h3>
                            </div>
                            <button
                                type="object"
                                groups="cetmix_tower_yaml.group_export"
                                class="oe_highlight"
                                name="action_open_yaml_export_wizard"
                                string="Export YAML"
                            />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="cx_tower_webhook_authenticator_view_tree" model="ir.ui.view">
        <field name="name">cx.tower.webhook.authenticator.view.list</field>
        <field name="model">cx.tower.webhook.authenticator</field>
        <field name="arch" type="xml">
            <list>
                <field name="name" />
                <field name="reference" optional="show" />
            </list>
        </field>
    </record>

    <record id="cx_tower_webhook_authenticator_view_search" model="ir.ui.view">
        <field name="name">cx.tower.webhook.authenticator.view.search</field>
        <field name="model">cx.tower.webhook.authenticator</field>
        <field name="arch" type="xml">
            <search string="Search Webhook Authenticators">
                <field name="name" />
                <field name="reference" />
            </search>
        </field>
    </record>

    <record id="cx_tower_webhook_authenticator_action" model="ir.actions.act_window">
        <field name="name">Webhook Authenticators</field>
        <field name="res_model">cx.tower.webhook.authenticator</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="cx_tower_webhook_authenticator_view_search" />
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Add a new webhook authenticator
          </p>
        </field>
    </record>

    <record
        id="action_cx_tower_webhook_authenticator_export_yaml"
        model="ir.actions.act_window"
    >
        <field name="name">Export YAML</field>
        <field name="res_model">cx.tower.yaml.export.wiz</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="binding_model_id" ref="model_cx_tower_webhook_authenticator" />
        <field name="binding_view_types">list</field>
        <field name="groups_id" eval="[(4, ref('cetmix_tower_yaml.group_export'))]" />
    </record>
</odoo>
